You can use this procedure with all versions of ONTAP supported by your storage system.

.Before you begin
* You must have the replacement part available.
* Make sure all other components in the storage system are functioning properly; if not, contact technical support.


== Step 1: Shut down the impaired node

Shut down or take over the impaired controller.

include::../_include/shutdown_most_frus_afx.adoc[]

== Step 2: Replace a failed I/O module

To replace an I/O module, locate it within the enclosure and follow the specific sequence of steps.

. If you are not already grounded, properly ground yourself.

. Unplug any cabling on the target I/O module.
+
NOTE: Make sure that you label where the cables were connected, so that you can connect them to the correct ports when you reinstall the module. 

. Rotate the cable management tray down by pulling the buttons on both sides on the inside of the cable management tray and then rotate the tray down.

+
NOTE: This following illustration shows removing a horizontal and vertical I/O module. Typically, you will only remove one I/O module.
+

image:../media/drw_a1k_io_remove_replace_ieops-1382.svg[Remove I/O module]
+
[cols="1,4"]
|===
a|
image:../media/icon_round_1.png[Callout number 1] 
a|
I/O cam latch
|===

+
Make sure that you label the cables so that you know where they came from.

. Remove the target I/O module from the enclosure:
.. Depress the cam button on the target module.
.. Rotate the cam latch away from the module as far as it will go.
.. Remove the module from the enclosure by hooking your finger into the cam lever opening and pulling the module out of the enclosure.
+
Make sure that you keep track of which slot the I/O module was in.

. Set the I/O module aside.
. Install the replacement I/O module into the enclosure:
.. Align the module with the edges of the enclosure slot opening.
.. Gently slide the module into the slot all the way into the enclosure, and then rotate the cam latch all the way up to lock the module in place.
. Re-cable the I/O module.
. Rotate the cable management tray up to the closed position.

== Step 3: Reboot the controller

After you replace an I/O module, you must reboot the controller.

. Reboot the controller from the LOADER prompt:
+
`bye`  
+
NOTE: Rebooting the impaired controller also reinitializes the I/O modules and other components.
. Press <enter> when console messages stop.
* If you see the _login_ prompt, go to the next step.
* If you do not see login prompt, log into the partner node.
. Give back only the root with override-destination-checks option:
+
`storage failover giveback -ofnode impaired-node -only-root true -override -destination-checks true`
+
NOTE: The following command is only available in the Diagnostic mode privilege level. For more information on privilege levels, see link:https://docs.netapp.com/us-en/ontap/system-admin/administrative-privilege-levels-concept.html[Understand the privilege levels for ONTAP CLI commands^]. 
+
If you encounter errors, contact https://support.netapp.com[NetApp Support].      
. Wait 5 minutes after the giveback report completes, and check failover status and giveback status:
+
`storage failover show` and `storage failover show-giveback`
+
NOTE: The following command is only available in the Diagnostic mode privilege level.
. If the HA internconnect links were taken down, bring them back up:
+
`system ha interconnect link on -node healthy-node -link 0`
+
`system ha interconnect link on -node healthy-node -link 1`
. If automatic giveback was disabled, reenable it:
+ 
`storage failover modify -ofnode impaired-node -automatic-giveback true`    
. Return the impaired controller to normal operation by giving back its storage:
+
`storage failover giveback -ofnode _impaired_node_name_`
. Restore automatic giveback from the console of the healthy controller:
+
`storage failover modify -node local -auto-giveback-of true` 
. If AutoSupport is enabled, restore/unsuppress automatic case creation:
+
`system node autosupport invoke -node * -type all -message MAINT=END`       

== Step 4: Return the failed part to NetApp

include::../_include/complete_rma.adoc[]
