This procedure is for systems with two node configurations. If you have a system with more than two nodes, see https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/ONTAP_OS/How_to_perform_a_graceful_shutdown_and_power_up_of_one_HA_pair_in_a_4__node_cluster[How to perform a graceful shutdown and power up of one HA pair in a four node cluster^]. 

.Before you begin

* Stop all clients/host from accessing data on the NetApp system.
* Suspend external backup jobs.
* Make sure you have the necessary permissions and credentials:
** Local administrator credentials for ONTAP.
** BMC accessability for each controller.

* Make sure you have the necessary tools and equipment for the replacement.
* As a best practice before shutdown, you should:

** Perform additional https://kb.netapp.com/onprem/ontap/os/How_to_perform_a_cluster_health_check_with_a_script_in_ONTAP[system health checks].
** Upgrade ONTAP to a recommended release for the system.
** Resolve any https://activeiq.netapp.com/[Active IQ Wellness Alerts and Risks].
Make note of any faults presently on the system, such as LEDs on the system components.

.Steps

. Log into the cluster through SSH or log in from any node in the cluster using a local console cable and a laptop/console.
. If AutoSupport is enabled, suppress case creation and indicate how long you expect the system to be offline:
+
`system node autosupport invoke -node * -type all -message "MAINT=2h Replace chassis"`
. Identify the SP/BMC address of all cluster nodes:
+
`system service-processor show -node * -fields address`

. Exit the cluster shell:
+
`exit`
. Log into SP/BMC over SSH using the IP address of any of the nodes listed in the output from the previous step to monitor progress. 
+
If you are using a console/laptop, log into the controller using the same cluster administrator credentials.
+

. Halt the two nodes located in the impaired chassis: 
+
`system node halt -node <node1>,<node2> -skip-lif-migration-before-shutdown true -ignore-quorum-warnings true -inhibit-takeover true`
+

NOTE: For clusters using SnapMirror synchronous operating in StrictSync mode: `system node halt -node <node1>,<node2>  -skip-lif-migration-before-shutdown true -ignore-quorum-warnings true -inhibit-takeover true -ignore-strict-sync-warnings true`

. Enter *y* for each controller in the cluster when you see `Warning: Are you sure you want to halt node "cluster  number"? {y|n}:`

. Wait for each controller to halt and display the LOADER prompt.

