// to reference this file and have pdf work correctly, use one block based on context and uncomment it

// if the context is a1k and a70-90:

// :a1k-a70-90:
// include::../_include/install_power_hardware_fragment_conditional.adoc[]
// :a1k-a70-90!:

// if the context is a20-30-50:

// :a20-30-50:
// include::../_include/install_power_hardware_fragment_conditional.adoc[]
// :a-20-30-50!:

// if the context is fas70-90:

// :fas70-90:
// include::../_include/install_power_hardware_fragment_conditional.adoc[]
// :fas-70-90!:

// if the context is fas50:

// :fas50:
// include::../_include/install_power_hardware_fragment_conditional.adoc[]
// :fas-50!:

== Step 1: Power on the shelf and assign shelf ID
Each shelf is distinguished by a unique shelf ID. This ID ensures that the shelf is distinct within your storage system setup.

.About this task
* A valid shelf ID is 01 through 99. 
+
If you have internal shelves (storage), which are integrated within the controllers, they are assigned a fixed shelf ID of 00.

* You must power cycle a shelf (unplug both power cords, wait the appropriate amount of time, and then plug them back in) for the shelf ID to take effect.

.Steps
. Power on the shelf by connecting the power cords first to the shelf, securing them in place with the power cord retainer, and then connecting the power cords to power sources on different circuits.
+
The shelf powers on and boots automatically when plugged into the power source. 

. Remove the left end cap to access the shelf ID button behind the faceplate.
+
image::../media/drw_a900_oie_change_ns224_shelf_ID_ieops-836.svg[Change NS224 shelf ID]
+

[cols="20%,80%"]
|===
a|
image::../media/icon_round_1.png[Callout number 1] 
a|
Shelf end cap
a|
image::../media/icon_round_2.png[[Callout number 2]
a|
Shelf faceplate 
a|
image::../media/icon_round_3.png[[Callout number 3]
a|
Shelf ID number
a|
image::../media/icon_round_4.png[[Callout number 4]
a|
Shelf ID button

|===
+
. Change the first number of the shelf ID:
.. Insert the straightened end of a paperclip or narrow tipped ball point pen into the small hole to press the shelf ID button.
+
// next note applies only to FAS70-90
ifdef::fas70-90[]
NOTE: On DS series shelves, the shelf ID button is accessible directly at the bottom of the shelf ear.
endif::fas70-90[]

.. Press and hold the shelf ID button until the first number on the digital display blinks, and then release the button.
+
It can take up to 15 seconds for the number to blink. This activates the shelf ID programming mode.
+
NOTE: If the ID takes longer than 15 seconds to blink, press and hold the shelf ID button again, making sure to press it in all the way.

.. Press and release the shelf ID button to advance the number until you reach the desired number from 0 to 9.
+
Each press and release duration can be as short as one second.
+
The first number continues to blink.
. Change the second number of the shelf ID:
.. Press and hold the button until the second number on the digital display blinks.
+
It can take up to three seconds for the number to blink.
+
The first number on the digital display stops blinking.

.. Press and release the shelf ID button to advance the number until you reach the desired number from 0 to 9.
+
The second number continues to blink.
. Lock in the desired number and exit the programming mode by pressing and holding the shelf ID button until the second number stops blinking.
+
It can take up to three seconds for the number to stop blinking.
+
Both numbers on the digital display start blinking and the amber LED illuminates after about five seconds, alerting you that the pending shelf ID has not yet taken effect.

. Power-cycle the shelf for at least 10 seconds to make the shelf ID take effect.
+
.. Unplug the power cord from both power supplies on the shelf.
+
.. Wait 10 seconds.
+
.. Plug the power cords back into the shelf power supplies to complete the power cycle.
+
A power supply is powered on as soon as the power cord is plugged in. Its bicolored LED should illuminate green.

. Replace the left end cap.


== Step 2: Power on the controllers
After you've powered on your shelves and assigned them unique IDs, power on the storage controllers.

.Steps

. Connect your laptop to the serial console port. This will allow you to monitor the boot sequence when the controllers are powered on.

.. Set the serial console port on the laptop to 115,200 baud with N-8-1.
+
NOTE: See your laptop's online help for instructions on how to configure the serial console port.

.. Using the console cable provided with your storage system, connect one end of the console cable to your laptop and the other end to the serial console port on controller A.
 
.. Connect the laptop to the switch on the management subnet.
+
// next image applies only to A1K and A70-90
ifdef::a1k-a70-90[]
image::../media/drw_a1k_70-90_console_connection_ieops-1702.svg[Console connections]
endif::a1k-a70-90[]
// next image applies only to A20-30-50
ifdef::a20-30-50[]
image::../media/drw_g_isi_console_serial_port_cabling_ieops-1882.svg[Console connections]
endif::a20-30-50[]
// next image applies only to FAS50
ifdef::fas50[]
image::../media/drw_g_isi_console_serial_port_cabling_ieops-1882.svg[Console connections]
endif::fas50[]

+
. Assign a TCP/IP address to the laptop, using one that is on the management subnet.
+
. Plug the power cords into the controller power supplies, and then connect them to power sources on different circuits.
+
// next image applies only to A1K and A70-90
ifdef::a1k-a70-90[]
image::../media/drw_affa1k_power_source_icon_ieops-1700.svg[A1K storage system and A70 or A90 power connection diagram]
endif::a1k-a70-90[]
// next image applies only to A20-30-50
ifdef::a20-30-50[]
image::../media/drw_psu_layout_1_ieops-1886.svg[A20 or A30 or A50 storage system power connection diagram]
endif::a20-30-50[]
// next image applies only to fas50
ifdef::fas50[]
image::../media/drw_psu_layout_1_ieops-1886.svg[fas50 storage system power connection diagram]
endif::fas50[]

* The system begins to boot. Initial booting might take up to eight minutes. 
+
* The LEDs flash on and the fans start, which indicates that the controllers are powering on.
+
* The fans might be very noisy when they first start up. The fan noise during start-up is normal.

. Secure the power cords using the securing device on each power supply.
