How you cable an NS224 shelf in an AFF A400 or AFF C400 HA pair depends on the number of shelves you are hot-adding and the number of RoCE-capable port sets (one or two) you are using on the controllers.

.Before you begin

* You must have reviewed the link:requirements-hot-add-shelf.html[hot-add requirements and best practices]. 

* You must have completed the applicable procedures in link:prepare-hot-add-shelf.html[Prepare-to hot-add a shelf]. 

* You must have installed the shelves, powered them on, and set the shelf IDs as described in link:prepare-hot-add-shelf.html[Install a shelf for a hot-add].

*Cable shelf to the AFF A400 HA pair*

Cable hot-add shelves to an AFF A400 HA pair.


.Steps

. If you are hot-adding one shelf using one set of RoCE-capable ports (onboard RoCE-capable ports) on each controller, and this is the only NS224 shelf in your HA pair, complete the following substeps.
+
Otherwise, go to the next step.

 .. Cable shelf NSM A port e0a to controller A port e0c.
 .. Cable shelf NSM A port e0b to controller B port e0d.
 .. Cable shelf NSM B port e0a to controller B port e0c.
 .. Cable shelf NSM B port e0b to controller A port e0d.
+
The following illustration shows cabling for one hot-added shelf using one set of RoCE-capable ports on each controller:
+
image::../media/drw_ns224_a400_1shelf.png[]

. If you are hot-adding one or two shelves using two sets of RoCE-capable ports (on board and PCIe card RoCE-capable ports) on each controller, complete the following substeps.
+
[options="header" cols="1,3"]
|===
| Shelves| Cabling
a|
Shelf 1
a|

 .. Cable NSM A port e0a to controller A port e0c.
 .. Cable NSM A port e0b to controller B slot 5 port 2 (e5b).
 .. Cable NSM B port e0a to controller B port e0c.
 .. Cable NSM B port e0b to controller A slot 5 port 2 (e5b).
 .. If you are hot-adding a second shelf, complete the "`Shelf 2`" substeps; otherwise, go to step 3.

a|
Shelf 2
a|

 .. Cable NSM A port e0a to controller A slot 5 port 1 (e5a).
 .. Cable NSM A port e0b to controller B port e0d.
 .. Cable NSM B port e0a to controller B slot 5 port 1 (e5a).
 .. Cable NSM B port e0b to controller A port e0d.
 .. Go to step 3.

+
|===
The following illustration shows cabling for two hot-added shelves:
+
image::../media/drw_ns224_a400_2shelves_IEOPS-983.svg[width=452px]

. Verify that the hot-added shelf is cabled correctly using https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor[Active IQ Config Advisor^].
+
If any cabling errors are generated, follow the corrective actions provided.


. If you disabled automatic drive assignment as part of the preparation for this procedure, you need to manually assign drive ownership and then re enable automatic drive assignment, if needed. See link:complete-hot-add-shelf.html[Complete the hot-add].
+
Otherwise, you are done with this procedure.

*Cable shelf to the AFF C400 HA pair*

Cable hot-add shelves to an AFF C400 HA pair.

.Steps

. If you are hot-adding one shelf using one set of RoCE-capable ports on each controller, and this is the only NS224 shelf in your HA pair, complete the following substeps.
+
Otherwise, go to the next step.

 .. Cable shelf NSM A port e0a to controller A slot 4 port 1 (e4a).
 .. Cable shelf NSM A port e0b to controller B slot 4 port 2 (e4b).
 .. Cable shelf NSM B port e0a to controller B slot 4 port 1 (e4a).
 .. Cable shelf NSM B port e0b to controller A slot 4 port 2 (e4b).
+
The following illustration shows cabling for one hot-added shelf using one set of RoCE-capable ports on each controller:
+
image::../media/drw_ns224_c400_1shelf_IEOPS-985.svg[width=452px]

. If you are hot-adding one or two shelves using two sets of RoCE-capable ports on each controller, complete the following substeps.
+
[options="header" cols="1,3"]
|===
| Shelves| Cabling
a|
Shelf 1
a|

 .. Cable NSM A port e0a to controller A slot 4 port 1 (e4a).
 .. Cable NSM A port e0b to controller B slot 5 port 2 (e5b).
 .. Cable NSM B port e0a to controller B port slot 4 port 1 (e4a).
 .. Cable NSM B port e0b to controller A slot 5 port 2 (e5b).
 .. If you are hot-adding a second shelf, complete the "`Shelf 2`" substeps; otherwise, go to step 3.

a|
Shelf 2
a|

 .. Cable NSM A port e0a to controller A slot 5 port 1 (e5a).
 .. Cable NSM A port e0b to controller B slot 4 port 2 (e4b).
 .. Cable NSM B port e0a to controller B slot 5 port 1 (e5a).
 .. Cable NSM B port e0b to controller A slot 4 port 2 (e4b).
 .. Go to step 3.

+
|===
The following illustration shows cabling for two hot-added shelves:
+
image::../media/drw_ns224_c400_2shelves_IEOPS-984.svg[width=452px]


. Verify that the hot-added shelf is cabled correctly using https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor[Active IQ Config Advisor^].
+
If any cabling errors are generated, follow the corrective actions provided.

. If you disabled automatic drive assignment as part of the preparation for this procedure, you need to manually assign drive ownership and then re enable automatic drive assignment, if needed. See link:complete-hot-add-shelf.html[Complete the hot-add].
+
Otherwise, you are done with this procedure.
