You must remove the controller from the chassis when you replace the controller or replace a component inside the controller.

.Before you begin

All other components in the storage system must be functioning properly; if not, you must contact https://mysupport.netapp.com/site/global/dashboard[NetApp Support] before continuing with this procedure.

.About this task
* You remove one controller at a time by repeating this procedure.
* The general behavior of the NV status LED on the impaired controller is as follows:

** The NV status LED flashes when power is removed from the impaired controller and the storage system is in the waiting for giveback state, or the controller is not taken over or halted properly because destaging of outstanding/uncommitted data is in progress.
+
You must confirm the controller had a clean takeover by the partner controller or the impaired controller shows `waiting for giveback`. Then, the flashing LED can be ignored (and the controller can be removed from the chassis).

** The NV LED is off when destaging of the outstanding/uncommitted data to persistent flash (a partition on the boot media) has completed. Then it is safe to continue with this procedure.

* I think I wants something like this: 

You need to make sure the controller had a clean takeover by the partner controller or the impaired controller shows waiting for giveback, before removing the controller. 

Ideally, you want the NV LED off, which indicates destaging is complete and it's safe to remove the impaired controller.

A common reason why a controller would not be ready for removal would be because destaging was in progress, which is indicated by a flashing NV LED. However, it could also mean that the impaired controller was not taken over or halted properly...

.Steps
. On the impaired controller, make sure the NV status LED is off.
+
[NOTE] 
====
If the NV status LED is flashing (green), it could mean the impaired controller was not taken over or halted properly because destaging of outstanding/uncommitted data is in progress.

If the impaired controller was not successfully taken over by the partner controller, contact https://mysupport.netapp.com/site/global/dashboard[NetApp Support] before continuing with this procedure.

Do not attempt to remove power from the impaired controller or remove the impaired controller from the chassis.
====

+
The NV status LED is located next to the NV icon on the controller.
+
image::../media/drw_g_nvram_led_ieops-1839.svg[NVRAM attention and status LED location]
+
[cols="1,4"]

|===
a|
image::../media/icon_round_1.png[Callout number 1]
a|
NV icon and status LED on the controller

|===
+


. If you are not already grounded, properly ground yourself.

. Disconnect the power on the impaired controller:
+
NOTE: PSUs do not have a power switch.
+
[options="header" cols="1,2"]

|===
| If you are disconnecting a...| Then...
a|
AC PSU
a|
. Open the power cord retainer.
. Unplug the power cord from the PSU and set it aside.
a|
DC PSU
a|
. Unscrew the two thumb screws on the D-SUB DC power cord connector.
. Unplug the power cord from the PSU and set it aside.

|===

+
. Unplug all cables from the impaired controller.
// book end for comment in g_controllerreinstall: Unplug all cables from the impaired controller and transceivers (QSFPs or SFPs) if needed.
+
Keep track of where the cables were connected.

. Remove the impaired controller:
+
The following illustration shows the operation of the controller handles (from the left side of the controller) when removing a controller:
+
image::../media/drw_g_and_t_handles_remove_ieops-1837.svg[controller handle operation to remove a controller]
+
[cols="1,4"]

|===
a|
image::../media/icon_round_1.png[Callout number 1]
a|
On both ends of the controller, push the vertical locking tabs outward to release the handles.
a|
image::../media/icon_round_2.png[Callout number 2] 
a|
* Pull the handles towards you to unseat the controller from the midplane.
+
As you pull, the handles extend out from the controller and then you feel some resistance, keep pulling.
+
* Slide the controller out of the chassis while supporting the bottom of the controller, and place it on a flat, stable surface. 
a|
image::../media/icon_round_3.png[Callout number 3] 
a|
Rotate the handles upright (next to the tabs) to move them out of the way.
|===



